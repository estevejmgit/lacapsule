<!-- include assets/css/carte_departement.css and js/carte_departement.js in page -->
<!-- parameters :
* type : type of map, comma separated value, if empty, displays 4-colors map of incidence
  - incidence_cas (default)
  - n_dose1_cumsum_pop
* display : comma separated array
  - title : display title
  - select : display departements selectbox

-->
{% assign displayArray = include.display | split: ", " %}

<div class="row">
    <div class="col-12">
        {% if include.type %}
            {% assign typesArray = include.type | split: ", " %}
            {% if typesArray.size == 1 %}
                <script type="application/javascript">
                    var typeCarte="{{ typesArray[0] }}";
                </script>
            {% else %}
                <div id="choixTypeCarte" class="btn-group" role="group">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle selected" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        Cas <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li data-carte="incidence-cas">
                            <a href="#" class="selected">Taux d'incidence (4 couleurs)</a>
                        </li>
                        <li data-carte="incidence-cas-12-couleurs">
                            <a href="#" class="">Taux d'incidence (12 couleurs)</a>
                        </li>
                        <li data-carte="evolution-cas"><a href="#">Évolution du taux d'incidence</a></li>
                        <li data-carte="taux-positivite"><a href="#">Taux de positivité</a></li>
                    </ul>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        Vaccinations <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li data-carte="n_dose1_cumsum_pop"><a href="#">Proportion partiellement vaccinés</a></li>
                    </ul>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        Hospitalisations <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li data-carte="incidence-hospitalisations"><a href="#">Admissions</a></li>
                        <li data-carte="lits-hospitalisations"><a href="#">Occupation</a></li>
                        <li data-carte="evolution-lits-hospitalisations"><a href="#">Évolution de l'occupation</a>
                        </li>
                    </ul>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        Réanimations <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li data-carte="incidence-reanimations"><a href="#">Admissions</a></li>
                        <li data-carte="saturation-reanimations"><a href="#">Taux d'occupation</a></li>
                        <li data-carte="lits-reanimations"><a href="#">Occupation</a></li>
                        <li data-carte="evolution-lits-reanimations"><a href="#">Évolution de l'occupation</a></li>
                    </ul>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        Décès <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li data-carte="incidence-deces"><a href="#">Taux d'incidence</a></li>
                        <li data-carte="evolution-deces"><a href="#">Évolution du taux d'incidence</a></li>
                    </ul>
                </div>
            </div><br>
            {% endif %}
        {% else %}
            <script type="application/javascript">
                var typeCarte="incidence-cas";
            </script>
        {% endif %}

    </div>

    {% if displayArray contains "title" %}
    <span id="titreCarte"></span><br>
    <span id="descriptionCarte"></span>
    <br>
    <br>
    {% endif %}
    <div class="col-11">
        <div id="carte">
            {% include svg/departements.svg %}
        </div>
        <div>
            CovidTracker.fr - Données : Santé publique France<br>
            <small class="text-muted">
                Carte adaptée à partir d'une création <a target="_blank"
                                                         href="https://fr.wikipedia.org/wiki/Fichier:Carte_vierge_d%C3%A9partements_fran%C3%A7ais_avec_DOM.svg">Wikipedia</a>
            </small>
        </div>
    </div>
    <div id="legendeCarte" class="col-1">
    </div>

</div>

<div style="
    {% if displayArray contains "select" %}
    display: block
    {% else %}
    display: none
    {% endif %}
">
    <select multiple="multiple" name="deps_list_choice" id="listeDepartements" class="select2">
        <option data-num="01" data-article="de l'" value="Ain">01 - Ain</option>
        <option data-num="02" data-article="de l'" value="Aisne">02 - Aisne</option>
        <option data-num="03" data-article="de l'" value="Allier">03 - Allier</option>
        <option data-num="04" data-article="des " value="Alpes-de-Haute-Provence">04 - Alpes-de-Haute-Provence
        </option>
        <option data-num="05" data-article="des " value="Hautes-Alpes">05 - Hautes-Alpes</option>
        <option data-num="06" data-article="des " value="Alpes-Maritimes">06 - Alpes-Maritimes</option>
        <option data-num="07" data-article="de l'" value="Ardèche">07 - Ardèche</option>
        <option data-num="08" data-article="des " value="Ardennes">08 - Ardennes</option>
        <option data-num="09" data-article="de l'" value="Ariège">09 - Ariège</option>
        <option data-num="10" data-article="de l'" value="Aube">10 - Aube</option>
        <option data-num="11" data-article="de l'" value="Aude">11 - Aude</option>
        <option data-num="12" data-article="de l'" value="Aveyron">12 - Aveyron</option>
        <option data-num="13" data-article="des " value="Bouches-du-Rhône">13 - Bouches-du-Rhône</option>
        <option data-num="14" data-article="du " value="Calvados">14 - Calvados</option>
        <option data-num="15" data-article="du " value="Cantal">15 - Cantal</option>
        <option data-num="16" data-article="de la " value="Charente">16 - Charente</option>
        <option data-num="17" data-article="de la " value="Charente-Maritime">17 - Charente-Maritime</option>
        <option data-num="18" data-article="du " value="Cher">18 - Cher</option>
        <option data-num="19" data-article="de la " value="Corrèze">19 - Corrèze</option>
        <option data-num="21" data-article="de la " value="Côte-d'or">21 - Côte-d'or</option>
        <option data-num="22" data-article="des " value="Côtes-d'armor">22 - Côtes-d'armor</option>
        <option data-num="23" data-article="de la " value="Creuse">23 - Creuse</option>
        <option data-num="24" data-article="de la " value="Dordogne">24 - Dordogne</option>
        <option data-num="25" data-article="du " value="Doubs">25 - Doubs</option>
        <option data-num="26" data-article="de la " value="Drôme">26 - Drôme</option>
        <option data-num="27" data-article="de l'" value="Eure">27 - Eure</option>
        <option data-num="28" data-article="de l'" value="Eure-et-Loir">28 - Eure-et-Loir</option>
        <option data-num="29" data-article="du " value="Finistère">29 - Finistère</option>
        <option data-num="2A" data-article="de la " value="Corse-du-Sud">2A - Corse-du-Sud</option>
        <option data-num="2B" data-article="de la " value="Haute-Corse">2B - Haute-Corse</option>
        <option data-num="30" data-article="du " value="Gard">30 - Gard</option>
        <option data-num="31" data-article="de la " value="Haute-Garonne">31 - Haute-Garonne</option>
        <option data-num="32" data-article="du " value="Gers">32 - Gers</option>
        <option data-num="33" data-article="de la " value="Gironde">33 - Gironde</option>
        <option data-num="34" data-article="de l'" value="Hérault">34 - Hérault</option>
        <option data-num="35" data-article="de l'" value="Ille-et-Vilaine">35 - Ille-et-Vilaine</option>
        <option data-num="36" data-article="de l'" value="Indre">36 - Indre</option>
        <option data-num="37" data-article="de l'" value="Indre-et-Loire">37 - Indre-et-Loire</option>
        <option data-num="38" data-article="de l'" value="Isère">38 - Isère</option>
        <option data-num="39" data-article="du " value="Jura">39 - Jura</option>
        <option data-num="40" data-article="des " value="Landes">40 - Landes</option>
        <option data-num="41" data-article="du" value="Loir-et-Cher">41 - Loir-et-Cher
        </option>
        <option data-num="42" data-article="de la " value="Loire">42 - Loire</option>
        <option data-num="43" data-article="de la " value="Haute-Loire">43 - Haute-Loire
        </option>
        <option data-num="44" data-article="de la " value="Loire-Atlantique">44 -
            Loire-Atlantique
        </option>
        <option data-num="45" data-article="du " value="Loiret">45 - Loiret</option>
        <option data-num="46" data-article="du " value="Lot">46 - Lot</option>
        <option data-num="47" data-article="du" value="Lot-et-Garonne">47 -
            Lot-et-Garonne
        </option>
        <option data-num="48" data-article="de la " value="Lozère">48 - Lozère</option>
        <option data-num="49" data-article="du " value="Maine-et-Loire">49 -
            Maine-et-Loire
        </option>
        <option data-num="50" data-article="de la " value="Manche">50 - Manche</option>
        <option data-num="51" data-article="de la " value="Marne">51 - Marne</option>
        <option data-num="52" data-article="de la " value="Haute-Marne">52 - Haute-Marne
        </option>
        <option data-num="53" data-article="de la " value="Mayenne">53 - Mayenne
        </option>
        <option data-num="54" data-article="de la " value="Meurthe-et-Moselle">54 -
            Meurthe-et-Moselle
        </option>
        <option data-num="55" data-article="de la " value="Meuse">55 - Meuse</option>
        <option data-num="56" data-article="du " value="Morbihan">56 - Morbihan</option>
        <option data-num="57" data-article="de la " value="Moselle">57 - Moselle
        </option>
        <option data-num="58" data-article="de la " value="Nièvre">58 - Nièvre</option>
        <option data-num="59" data-article="du " value="Nord">59 - Nord</option>
        <option data-num="60" data-article="de l'" value="Oise">60 - Oise</option>
        <option data-num="61" data-article="de l'" value="Orne">61 - Orne</option>
        <option data-num="62" data-article="du " value="Pas-de-Calais">62 -
            Pas-de-Calais
        </option>
        <option data-num="63" data-article="du " value="Puy-de-Dôme">63 - Puy-de-Dôme
        </option>
        <option data-num="64" data-article="des" value="Pyrénées-Atlantiques">64 -
            Pyrénées-Atlantiques
        </option>
        <option data-num="65" data-article="des " value="Hautes-Pyrénées">65 -
            Hautes-Pyrénées
        </option>
        <option data-num="66" data-article="des " value="Pyrénées-Orientales">66 -
            Pyrénées-Orientales
        </option>
        <option data-num="67" data-article="du " value="Bas-Rhin">67 - Bas-Rhin</option>
        <option data-num="68" data-article="du " value="Haut-Rhin">68 - Haut-Rhin
        </option>
        <option data-num="69" data-article="du " value="Rhône">69 - Rhône</option>
        <option data-num="70" data-article="de la " value="Haute-Saône">70 - Haute-Saône
        </option>
        <option data-num="71" data-article="de la " value="Saône-et-Loire">71 -
            Saône-et-Loire
        </option>
        <option data-num="72" data-article="de la " value="Sarthe">72 - Sarthe</option>
        <option data-num="73" data-article="de la " value="Savoie">73 - Savoie</option>
        <option data-num="74" data-article="de la " value="Haute-Savoie">74 -
            Haute-Savoie
        </option>
        <option data-num="75" data-article="de " value="Paris">75 - Paris</option>
        <option data-num="76" data-article="de la " value="Seine-Maritime">76 -
            Seine-Maritime
        </option>
        <option data-num="77" data-article="de la " value="Seine-et-Marne">77 -
            Seine-et-Marne
        </option>
        <option data-num="78" data-article="des " value="Yvelines">78 - Yvelines
        </option>
        <option data-num="79" data-article="des " value="Deux-Sèvres">79 - Deux-Sèvres
        </option>
        <option data-num="80" data-article="de la " value="Somme">80 - Somme</option>
        <option data-num="81" data-article="du " value="Tarn">81 - Tarn</option>
        <option data-num="82" data-article="du " value="Tarn-et-Garonne">82 -
            Tarn-et-Garonne
        </option>
        <option data-num="83" data-article="du " value="Var">83 - Var</option>
        <option data-num="84" data-article="du " value="Vaucluse">84 - Vaucluse</option>
        <option data-num="85" data-article="de la " value="Vendée">85 - Vendée</option>
        <option data-num="86" data-article="de la " value="Vienne">86 - Vienne</option>
        <option data-num="87" data-article="de la " value="Haute-Vienne">87 -
            Haute-Vienne
        </option>
        <option data-num="88" data-article="des" value="Vosges">88 - Vosges</option>
        <option data-num="89" data-article="de l'" value="Yonne">89 - Yonne</option>
        <option data-num="90" data-article="du " value="Territoire de Belfort">90 -
            Territoire de Belfort
        </option>
        <option data-num="91" data-article="de l'" value="Essonne">91 - Essonne</option>
        <option data-num="92" data-article="des " value="Hauts-de-Seine">92 -
            Hauts-de-Seine
        </option>
        <option data-num="93" data-article="de la " value="Seine-Saint-Denis">93 -
            Seine-Saint-Denis
        </option>
        <option data-num="94" data-article="du " value="Val-de-Marne">94 - Val-de-Marne</option>
        <option data-num="95" data-article="du " value="Val-d'oise">95 - Val-d'oise</option>
        <option data-num="971" data-article="de la " value="Guadeloupe">971 - Guadeloupe</option>
        <option data-num="972" data-article="de la " value="Martinique">972 - Martinique</option>
        <option data-num="973" data-article="de la " value="Guyane">973 - Guyane</option>
        <option data-num="974" data-article="de " value="La Réunion">974 - La Réunion</option>
        <option data-num="976" data-article="de " value="Mayotte">976 - Mayotte</option>
    </select>
</div>

<script id="legendTemplatePre" type="text/template">
    <table>
        <tbody>
</script>

<script id="legendTemplateMid" type="text/template">
    <tr>
        <td style="text-align: center; background-color: colorBg; color: white; font-size: 50%; padding: 5px;">valeur
        </td>
    </tr>
</script>

<script id="legendTemplatePost" type="text/template">
    </tbody>
    </table>
</script>